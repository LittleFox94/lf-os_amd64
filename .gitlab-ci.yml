image: registry.lf-net.org/littlefox/lf-os_amd64/ci:2019091701
stages:
- test
- build
- pages

test:
  stage: test
  script:
    - make test
      
pages:
  stage: pages
  script:
    - make doc
    - mv doc/doxygen/html public
  artifacts:
    paths:
    - public
  only:
  - master

build:
  stage: build
  script:
    - make hd.img.gz lf-os.iso.gz
  artifacts:
    paths:
      - hd.img.gz
      - lf-os.iso.gz
